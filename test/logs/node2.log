time=2026-01-18T10:01:49.992+08:00 level=INFO msg="Starting VIP-Switch" node_id=node2 raft_addr=127.0.0.1:7947 data_dir=./test/data/node2 config_file=./test/configs/node2-config.yaml
time=2026-01-18T10:01:50.015+08:00 level=INFO msg="initial configuration" index=0 servers="[%+v []]"
time=2026-01-18T10:01:50.015+08:00 level=INFO msg="Starting Raft node" node_id=node2 raft_addr=127.0.0.1:7947
time=2026-01-18T10:01:50.015+08:00 level=INFO msg="Bootstrapping cluster"
time=2026-01-18T10:01:50.015+08:00 level=INFO msg="entering follower state" follower="Node at 127.0.0.1:7947 [Follower]" leader-address="" leader-id=""
time=2026-01-18T10:01:50.029+08:00 level=INFO msg="Joining cluster peers" peers="[127.0.0.1:7946 127.0.0.1:7948]"
time=2026-01-18T10:01:50.029+08:00 level=INFO msg="Starting state machine" state=Ready
time=2026-01-18T10:01:50.029+08:00 level=INFO msg="Executing ToReady hook"
time=2026-01-18T10:01:50.029+08:00 level=INFO msg="Executing hook" event_type=ToReady command=./test/scripts/on-ready-test.sh
time=2026-01-18T10:01:50.033+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] ============================================="
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] Node started at Sun Jan 18 10:01:50 CST 2026"
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] Node ID: node2"
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] Event Type: ToReady"
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] ============================================="
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] VIP Configuration:"
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady]   VIP Address: 192.168.1.100/32"
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady]   Interface: eth0"
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady]   ARP Count: 3"
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady]   ARP Delay: 200ms"
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] ============================================="
time=2026-01-18T10:01:50.035+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] Process info: PID=78554"
time=2026-01-18T10:01:50.036+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] Working directory: /Users/lowezheng/lowe/workspace/vip-switch-go"
time=2026-01-18T10:01:50.036+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] Environment variables:"
time=2026-01-18T10:01:50.038+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady]   NODE_ID=node2"
time=2026-01-18T10:01:50.038+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady]   EVENT_TYPE=ToReady"
time=2026-01-18T10:01:50.038+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] ============================================="
time=2026-01-18T10:01:50.038+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] Initialization complete, waiting for Raft election..."
time=2026-01-18T10:01:50.038+08:00 level=INFO msg="Hook output" event_type=ToReady stream=stdout line="[ToReady] ============================================="
time=2026-01-18T10:01:50.038+08:00 level=INFO msg="Hook executed successfully" event_type=ToReady
time=2026-01-18T10:01:50.038+08:00 level=INFO msg="ToReady hook completed successfully"
time=2026-01-18T10:01:51.031+08:00 level=INFO msg="State transition" from=Ready to=Slave
time=2026-01-18T10:01:51.031+08:00 level=INFO msg="Executing hook" event_type=ToSlave command=./test/scripts/on-slave-test.sh
time=2026-01-18T10:01:51.041+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] Event received at Sun Jan 18 10:01:51 CST 2026"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] Node ID: node2"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] Event Type: ToSlave"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] ============================================="
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] SIMULATING VIP UNBINDING (NO REAL IP OPERATION)"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] Unbinding VIP: 192.168.1.100/32 from eth0"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] ============================================="
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] ✓ VIP unbind command executed successfully (simulated)"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] Note: Command would have failed if VIP didn't exist (ignored)"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] ============================================="
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] VIP unbound successfully (simulated)"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] Current state: SLAVE (VIP unbound)"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] ============================================="
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] Process info: PID=78568"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave] Environment variables:"
time=2026-01-18T10:01:51.042+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stderr line="[ToSlave] Executing: ip addr del 192.168.1.100/32 dev eth0"
time=2026-01-18T10:01:51.045+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave]   NODE_ID=node2"
time=2026-01-18T10:01:51.045+08:00 level=INFO msg="Hook output" event_type=ToSlave stream=stdout line="[ToSlave]   EVENT_TYPE=ToSlave"
time=2026-01-18T10:01:51.045+08:00 level=INFO msg="Hook executed successfully" event_type=ToSlave
time=2026-01-18T10:01:51.544+08:00 level=WARN msg="heartbeat timeout reached, starting election" last-leader-addr="" last-leader-id=""
time=2026-01-18T10:01:51.544+08:00 level=INFO msg="entering candidate state" node="Node at 127.0.0.1:7947 [Candidate]" term=2
time=2026-01-18T10:01:51.544+08:00 level=INFO msg="pre-vote successful, starting election" term=2 tally=1 refused=0 votesNeeded=1
time=2026-01-18T10:01:51.559+08:00 level=INFO msg="election won" term=2 tally=1
time=2026-01-18T10:01:51.559+08:00 level=INFO msg="entering leader state" leader="Node at 127.0.0.1:7947 [Leader]"
time=2026-01-18T10:01:54.031+08:00 level=INFO msg="State transition" from=Slave to=Master
time=2026-01-18T10:01:54.031+08:00 level=INFO msg="Executing hook" event_type=ToMaster command=./test/scripts/on-master-test.sh
time=2026-01-18T10:01:54.047+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Event received at Sun Jan 18 10:01:54 CST 2026"
time=2026-01-18T10:01:54.047+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Node ID: node2"
time=2026-01-18T10:01:54.047+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Event Type: ToMaster"
time=2026-01-18T10:01:54.047+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] ============================================="
time=2026-01-18T10:01:54.047+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] SIMULATING VIP BINDING (NO REAL IP OPERATION)"
time=2026-01-18T10:01:54.047+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Binding VIP: 192.168.1.100/32 on eth0"
time=2026-01-18T10:01:54.047+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] ============================================="
time=2026-01-18T10:01:54.047+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] ✓ VIP bind command executed successfully (simulated)"
time=2026-01-18T10:01:54.047+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stderr line="[ToMaster] Executing: ip addr replace 192.168.1.100/32 dev eth0"
time=2026-01-18T10:01:54.050+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Sending ARP broadcast (1/3): arping -U -c 1 -I eth0 192.168.1.100"
time=2026-01-18T10:01:54.264+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Sending ARP broadcast (2/3): arping -U -c 1 -I eth0 192.168.1.100"
time=2026-01-18T10:01:54.485+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Sending ARP broadcast (3/3): arping -U -c 1 -I eth0 192.168.1.100"
time=2026-01-18T10:01:54.485+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] ============================================="
time=2026-01-18T10:01:54.486+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] VIP bound successfully (simulated)"
time=2026-01-18T10:01:54.486+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Current state: MASTER with VIP 192.168.1.100/32"
time=2026-01-18T10:01:54.486+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] ============================================="
time=2026-01-18T10:01:54.486+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Process info: PID=78606"
time=2026-01-18T10:01:54.486+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster] Environment variables:"
time=2026-01-18T10:01:54.503+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster]   NODE_ID=node2"
time=2026-01-18T10:01:54.503+08:00 level=INFO msg="Hook output" event_type=ToMaster stream=stdout line="[ToMaster]   EVENT_TYPE=ToMaster"
time=2026-01-18T10:01:54.504+08:00 level=INFO msg="Hook executed successfully" event_type=ToMaster
time=2026-01-18T10:02:08.052+08:00 level=INFO msg="Received signal, shutting down" signal=terminated
time=2026-01-18T10:02:08.052+08:00 level=INFO msg="Executing ToDestroy hook"
time=2026-01-18T10:02:08.052+08:00 level=INFO msg="Stopping state machine"
time=2026-01-18T10:02:08.052+08:00 level=INFO msg="Executing hook" event_type=ToDestroy command=./test/scripts/on-destroy-test.sh
time=2026-01-18T10:02:08.052+08:00 level=ERROR msg="Hook execution failed" event_type=ToDestroy error="failed to start command: context canceled"
time=2026-01-18T10:02:08.052+08:00 level=WARN msg="Hook failed but continuing due to continue strategy" event_type=ToDestroy
time=2026-01-18T10:02:08.052+08:00 level=INFO msg="ToDestroy hook completed successfully"
time=2026-01-18T10:02:08.052+08:00 level=INFO msg="VIP-Switch shutdown complete"
time=2026-01-18T10:02:08.052+08:00 level=INFO msg="Shutting down Raft node"
time=2026-01-18T10:02:08.052+08:00 level=INFO msg="Raft node shutdown complete"
